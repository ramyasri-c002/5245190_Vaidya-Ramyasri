#include<stdio.h>
#include<stdlib.h>
int main(){
    int N, Q;
    scanf("%d %d", &N, &Q);
    int* sz = (int*)calloc(N, sizeof(int));
    int** seqs = (int**)calloc(N, sizeof(int*));
    int lastAnswer = 0;
    while (Q--) {
        int type, x, y;
        scanf("%d", &type);
        if (type == 1) {
            scanf("%d %d", &x, &y);
            int idx = (x ^ lastAnswer) % N;
            int currSize = sz[idx];
            
            seqs[idx] = (int*)realloc(seqs[idx], sizeof(int) * (currSize + 1));
            seqs[idx][currSize] = y;
            sz[idx]++;
        } else if (type == 2) {
            scanf("%d %d", &x, &y);
            int idx = (x ^ lastAnswer) % N;
            int value = seqs[idx][y % sz[idx]];
            lastAnswer = value;
            printf("%d\n", lastAnswer);
        }
    }
    for (int i = 0; i < N; i++) {
        free(seqs[i]);
    }
    free(seqs);
    free(sz);
    
    return 0;
}
