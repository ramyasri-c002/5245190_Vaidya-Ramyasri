#include <cmath>
#include <cstdio>
#include <vector>
#include <iostream>
#include <algorithm>
#include<stack>
using namespace std;


int main() {
    int Q;
    cin >> Q;
    string s = "";
    
    stack<string> history;
    while (Q--){
        int op;
        cin>>op;
        if(op==1){
            string w;
            cin>>w;
            history.push(s);
            s+=w;
           
        }else if(op==2){
            int k;
            cin>>k;
                history.push(s);
                s.erase(s.size()- k);
        }
        else if(op==3){
            int k;
            cin>>k;
            cout<<s[k-1]<<"\n";
            
        }else if(op==4){
            if(!history.empty()){
                s=history.top();
                s=history.top();
                history.pop();
                
            }
        }
    }
    
      
    return 0;
}
